<!DOCTYPE html>
<html lang="en">
<head>
    <title>AssemblyScript | wasm | vue3 | calculator</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <script type="importmap">
    {
        "imports": {
            "vue": "https://cdnjs.cloudflare.com/ajax/libs/vue/3.2.35/vue.esm-browser.prod.min.js"
        }
    }
    </script>
</head>
<body>
<script type="text/x-template" id="calculator">
    <form>
        <label class="label">
            term A:
            <input type="number" v-model="termA" class="input">
        </label>
        <label class="label">
            term B:
            <input type="number" v-model="termB" class="input">
        </label>
        <label class="label">
            sum A+B:
            <input type="number" :value="sum" class="input" disabled>
        </label>
    </form>
</script>
<div id="app" class="container">
    <Calculator class="section"></Calculator>
</div>

<script type="module">
    import {
        createApp,
        computed,
        toRefs,
    } from 'vue';

    import { add } from "./build/release.js";

    const app = createApp({});
    app.component('Calculator', {

        props: {
            termA: {
                default: 0,
            },
            termB: {
                default: 0,
            },
        },

        setup(props) {
            const {
                termA,
                termB,
            } = toRefs(props);
            const sum = computed(() => add(termA.value, termB.value));
            return {
                termA,
                termB,
                sum,
            };
        },
        template: '#calculator',
        model: {
            termA: 'keyup',
            termB: 'keyup'
        },
    });

    app.mount('#app');
</script>
</body>
</html>;